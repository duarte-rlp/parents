{% extends "global/Page.html" %}
{% load otree static %}

{% block scripts %}
    
    <link href="{% static 'survey/css/styles.css' %}" rel="stylesheet">

    <script>

        function nextView() {
            // crop types -> crops1
            document.getElementById('q_cropTypes').value = getChecked('opt_cropTypes');
            // events
            document.getElementById('q_events').value = getChecked('opt_events');
            // Botón de siguiente
            let btn = document.getElementById("id_next");
            btn.removeAttribute("disabled");
            btn.click();
        }

        function getChecked(name_tag) {
            let checkbox_selected = "[";
            let checkbox = document.getElementsByName(name_tag);
            for (let i=0; i<checkbox.length; i++) {
                if (checkbox[i].checked) {
                    checkbox_selected += checkbox[i].value;
                    checkbox_selected += ", ";
                }
            }
            checkbox_selected = checkbox_selected.substr(0, checkbox_selected.length-2);
            checkbox_selected += "]";
            return checkbox_selected;
        }

    </script>

{% endblock %}

{% block title %}
    Agro
{% endblock %}

{% block content %}

<div id="q1">
    <label for="hectares_list" id="l_hectares_list"><b>El año pasado ¿Cuántas hectáreas dedicó a actividades agrícolas o pecuarias?</b></label><br>
    <select id="hectares_list" class="input-list" name="q_hectares" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in hectares_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q2">
    <label for="farminc_list" id="l_farminc_list"><b>¿Cuál es la principal fuente de ingresos de la finca donde trabaja?</b></label><br>
    <select id="farminc_list" class="input-list" name="q_farminc" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in farminc_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q3">
    <label for="crops_list" id="l_crops_list"><b>Cuando cultiva ¿Cuántos cultivos diferentes siembra al mismo tiempo?</b></label><br>
    <select id="crops_list" class="input-list" name="q_crops" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in crops_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q4">
    <b>¿Qué tipo de cultivos sembró el año pasado? (Puede marcar varias opciones)</b><br>
        {% for opcion in cropTypes_list %}
        <label><input type="checkbox" name="opt_cropTypes" value="{{ opcion }}">{{ opcion }}</label><br>
        {% endfor %}
        <input type="hidden" id="q_cropTypes" name="q_cropTypes">
</div>

<br>

<div id="q5">
    <b>¿Qué tan importante son estos criterios a la hora de decidir qué cultivar?</b><br>
        <table style="width: 100%; text-align: center; margin-top: 5px;">
            <tr><td colspan="13" style="width: 0.5rem;"><hr width="100%;"></td></tr>
            {% for i in cropImportance_list %}
            <table class="table_option">
                <tr class="row_option_sta" id="row_option_sta_{{ forloop.counter }}"><td colspan="13"><ul><li>{{ i }}</li></ul></td></tr>
                <tr class="row_option_opt" id="row_option_opt_{{ forloop.counter }}">
                    <td style="width: 15%;">
                        Nada importante
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op0" name="q_cropsImp_{{ forloop.counter }}" value="0" class="items01" required><br>0
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op1" name="q_cropsImp_{{ forloop.counter }}" value="1" class="items01"><br>1
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op2" name="q_cropsImp_{{ forloop.counter }}" value="2" class="items01"><br>2
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op3" name="q_cropsImp_{{ forloop.counter }}" value="3" class="items01"><br>3
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op4" name="q_cropsImp_{{ forloop.counter }}" value="4" class="items01"><br>4
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op5" name="q_cropsImp_{{ forloop.counter }}" value="5" class="items01"><br>5
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op6" name="q_cropsImp_{{ forloop.counter }}" value="6" class="items01"><br>6
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op7" name="q_cropsImp_{{ forloop.counter }}" value="7" class="items01"><br>7
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op8" name="q_cropsImp_{{ forloop.counter }}" value="8" class="items01"><br>8
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op9" name="q_cropsImp_{{ forloop.counter }}" value="9" class="items01"><br>9
                    </td>
                    <td>
                        <input type="radio" id="q_cropsImp_{{ forloop.counter }}_op10" name="q_cropsImp_{{ forloop.counter }}" value="10" class="items01"><br>10
                    </td>
                    <td style="width: 15%;">
                        Muy importante
                    </td>
                </tr>
            </table>
            <tr><td colspan="13"><hr width="100%;"></td></tr>
            {% endfor %}
        </table>
</div>

<br>

<div id="q6">
    <label for="cropsLoss_list" id="l_cropsLoss_list"><b>¿Alguna vez ha experimentado una pérdida de cosechas?</b></label><br>
    <select id="cropsLoss_list" class="input-list" name="q_cropsLoss" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in cropsLoss_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q7">
    <label for="savings_list" id="l_savings_list"><b>¿Tiene reservas de dinero o cualquier otra forma de ingreso para protegerse contra pérdidas de cosechas?</b></label><br>
    <select id="savings_list" class="input-list" name="q_savings" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in savings_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q8">
    <b>¿Qué tan frecuentemente hace algunas de las siguientes actividades para proteger sus ingresos contra las malas cosechas?</b><br>
        <table style="width: 100%; text-align: center; margin-top: 5px;">
            <tr><td colspan="13" style="width: 0.5rem;"><hr width="100%;"></td></tr>
            {% for i in protection_list %}
            <table class="table_option">
                <tr class="row_option_sta" id="row_option_sta_{{ forloop.counter }}"><td colspan="13"><ul><li>{{ i }}</li></ul></td></tr>
                <tr class="row_option_opt" id="row_option_opt_{{ forloop.counter }}">
                    <td style="width: 15%;">
                        Nunca
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op0" name="q_protection_{{ forloop.counter }}" value="0" class="items01" required><br>0
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op1" name="q_protection_{{ forloop.counter }}" value="1" class="items01"><br>1
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op2" name="q_protection_{{ forloop.counter }}" value="2" class="items01"><br>2
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op3" name="q_protection_{{ forloop.counter }}" value="3" class="items01"><br>3
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op4" name="q_protection_{{ forloop.counter }}" value="4" class="items01"><br>4
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op5" name="q_protection_{{ forloop.counter }}" value="5" class="items01"><br>5
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op6" name="q_protection_{{ forloop.counter }}" value="6" class="items01"><br>6
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op7" name="q_protection_{{ forloop.counter }}" value="7" class="items01"><br>7
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op8" name="q_protection_{{ forloop.counter }}" value="8" class="items01"><br>8
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op9" name="q_protection_{{ forloop.counter }}" value="9" class="items01"><br>9
                    </td>
                    <td>
                        <input type="radio" id="q_protection_{{ forloop.counter }}_op10" name="q_protection_{{ forloop.counter }}" value="10" class="items01"><br>10
                    </td>
                    <td style="width: 15%;">
                        Siempre
                    </td>
                </tr>
            </table>
            <tr><td colspan="13"><hr width="100%;"></td></tr>
            {% endfor %}
        </table>
</div>

<br>

<div id="q9">
    <label for="climate_list" id="l_climate_list"><b>En su opinión, ¿El cambio climático ya ha afectado la producción agrícola?</b></label><br>
    <select id="climate_list" class="input-list" name="q_climate" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in climate_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>

<div id="q10">
    <b>Durante los últimos 12 meses, ¿En esta zona o vecindario se presentaron algunos de los siguientes problemas? (Puede marcar varias opciones)</b><br>
        {% for opcion in events_list %}
        <label><input type="checkbox" name="opt_events" value="{{ opcion }}">{{ opcion }}</label><br>
        {% endfor %}
        <input type="hidden" id="q_events" name="q_events">
</div>

<br>

<div id="q11">
    <label for="measures_list" id="l_measures_list"><b>Si estos eventos afectarán negativamente a su hogar ¿Qué medida tomaría?</b></label><br>
    <select id="measures_list" class="input-list" name="q_measures" required>
        <option class="input-list" value disabled selected>---------</option>
        {% for opcion in measures_list %}
            <option value="{{ opcion }}" class="input-list">{{ opcion }}</option>
        {% endfor %}
    </select>
</div>

<br>


<!--
{% formfields %}
-->

<div class="div_btnNext">
    <input type="button" value="Siguiente" class="btnNext" onclick="nextView()" id="btnNext">
    <button class="otree-btn-next btn btn-primary" style="display: none;" id="id_next" disabled>Siguiente</button>
</div>

{% endblock %}